
{% extends 'base.html' %}

{% block css %}

{% endblock %}

{% block content %}

<div class="content-page">
    <div class="content">

        <!-- Start Content-->
        <div class="container-fluid">

            <div class="row">
                <div class="col-12">
                    <div class="page-title-box">                                    
                        <h4 class="page-title">Report</h4>
                    </div>
                </div>
            </div>
            <div class="card text-center">
              <div class="card-header bg-light text-success">
                <h3>Exercise Report</h3>
              </div>
              <div class="card-body">
                <h2 class="card-title text-info">{{ user_info.first_name }} {{ user_info.last_name }}</h2>
                <h3 class="card-text mx-3 text-warning">Email: {{ user_info.email }}</h3>
                <div class="row mx-5">
                  <div class="table-responsive">
                      <table class="table table-hover table-sm">
                          <thead class="table table-dark">
                            <tr>
                              <th scope="col">Exercise Name</th>
                              <th scope="col">Result</th>
                            </tr>
                          </thead>
                          <tbody class="table-group-divider">
                            <tr>
                              <th scope="row">{{ therapy_name }}</th>
                              <td>{{ analysis_result }}</td>
                            </tr>
                          </tbody>
                        </table>
                
                  </div>
              </div>
              </div>
              <div class="card-footer text-muted bg-light">
                <i>Date: <span id="currentDate"></span></i>
              </div>
              <button onclick="goBack()">Go Back</button>
              
              <!-- <form id="myForm">
                  <input type="hidden" value="{{ therapy_name }}" name="therapy_name">
                  <input type="hidden" value="{{ user_info.id}}" name="user_id">
                  <input type="hidden" value="{{ user_info.first_name }} {{ user_info.last_name }}" name="user_name">
                  <input type="hidden" value="{{ analysis_result }}" name="result">
                  <input type="hidden" value="" id="dateInput" name="date">
                  <button type="submit">Save</button>
              </form> -->
            </div>

        </div>
        <!-- container -->

    </div>
    <!-- content -->

    {% include "footer/js_file.html" %}

</div>

{% endblock %}

{% block js %}

<script>
  var currentDate = new Date().toLocaleDateString('en-GB');
  document.getElementById('currentDate').textContent = currentDate;
  // Find the input field by its ID
  var dateInput = document.getElementById('dateInput');

  // Set the value of the input field to the current date
  dateInput.value = currentDate;

  function goBack() {
    window.history.back();
}
</script>

{% comment %} <script>
  // Find the form element by its ID
  var myForm = document.getElementById('myForm');

  // Add a submit event listener to the form
  myForm.addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent the default form submission

      // Collect form data
      var formData = new FormData(myForm);

      // Convert the FormData object to a JSON object (optional)
      var formDataJSON = {};
      formData.forEach(function(value, key) {
          formDataJSON[key] = value;
      });

      // Display the collected data (optional)
      console.log(formDataJSON);

      // Send the data to your server using an XMLHttpRequest or fetch
      // Example using fetch (adjust the URL and method accordingly):
      fetch('/home/create_report', {
          method: 'POST',
          body: formData
      })
      .then(response => {
          // Handle the response from the server
          if (response.ok) {
              // Data saved successfully
              console.log('Data saved successfully');
              // You can redirect the user or display a success message here
          } else {
              // Data save failed
              console.error('Data save failed');
              // Handle the error or display an error message
          }
      })
      .catch(error => {
          console.error('Error:', error);
          // Handle the network error
      });
  });
</script> {% endcomment %}

{% endblock %}


